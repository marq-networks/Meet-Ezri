"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.userRoutes = userRoutes;
const user_controller_1 = require("./user.controller");
async function userRoutes(fastify) {
    // Admin Routes
    fastify.get('/admin/users', {
        preHandler: [fastify.authenticate, fastify.authorize(['super_admin', 'org_admin'])],
    }, user_controller_1.getAllUsersHandler);
    fastify.get('/admin/users/:userId', {
        preHandler: [fastify.authenticate, fastify.authorize(['super_admin', 'org_admin'])],
    }, user_controller_1.getUserProfileAdminHandler);
    // User Routes
    fastify.post('/init', {
        preHandler: [fastify.authenticate],
    }, user_controller_1.initProfileHandler);
    fastify.get('/me', {
        preHandler: [fastify.authenticate],
    }, user_controller_1.getMeHandler);
    fastify.get('/credits', {
        preHandler: [fastify.authenticate],
    }, user_controller_1.getCreditsHandler);
    fastify.patch('/me', {
        preHandler: [fastify.authenticate],
    }, user_controller_1.updateProfileHandler);
    fastify.post('/onboarding', {
        preHandler: [fastify.authenticate],
    }, user_controller_1.completeOnboardingHandler);
    fastify.delete('/me', {
        preHandler: [fastify.authenticate],
    }, user_controller_1.deleteUserHandler);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzovVXNlcnMvU2FpZiBBbGkvRG9jdW1lbnRzL0dpdEh1Yi9NZWV0RXpyaS9hcHBzL2FwaS9zcmMvbW9kdWxlcy91c2Vycy91c2VyLnJvdXRlcy50cyIsInNvdXJjZXMiOlsiQzovVXNlcnMvU2FpZiBBbGkvRG9jdW1lbnRzL0dpdEh1Yi9NZWV0RXpyaS9hcHBzL2FwaS9zcmMvbW9kdWxlcy91c2Vycy91c2VyLnJvdXRlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQVlBLGdDQWtFQztBQTdFRCx1REFTMkI7QUFFcEIsS0FBSyxVQUFVLFVBQVUsQ0FBQyxPQUF3QjtJQUN2RCxlQUFlO0lBQ2YsT0FBTyxDQUFDLEdBQUcsQ0FDVCxjQUFjLEVBQ2Q7UUFDRSxVQUFVLEVBQUUsQ0FBQyxPQUFPLENBQUMsWUFBWSxFQUFFLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxhQUFhLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQztLQUNwRixFQUNELG9DQUFrQixDQUNuQixDQUFDO0lBRUYsT0FBTyxDQUFDLEdBQUcsQ0FDVCxzQkFBc0IsRUFDdEI7UUFDRSxVQUFVLEVBQUUsQ0FBQyxPQUFPLENBQUMsWUFBWSxFQUFFLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxhQUFhLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQztLQUNwRixFQUNELDRDQUEwQixDQUMzQixDQUFDO0lBRUYsY0FBYztJQUNkLE9BQU8sQ0FBQyxJQUFJLENBQ1YsT0FBTyxFQUNQO1FBQ0UsVUFBVSxFQUFFLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQztLQUNuQyxFQUNELG9DQUFrQixDQUNuQixDQUFDO0lBRUYsT0FBTyxDQUFDLEdBQUcsQ0FDVCxLQUFLLEVBQ0w7UUFDRSxVQUFVLEVBQUUsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDO0tBQ25DLEVBQ0QsOEJBQVksQ0FDYixDQUFDO0lBRUYsT0FBTyxDQUFDLEdBQUcsQ0FDVCxVQUFVLEVBQ1Y7UUFDRSxVQUFVLEVBQUUsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDO0tBQ25DLEVBQ0QsbUNBQWlCLENBQ2xCLENBQUM7SUFFRixPQUFPLENBQUMsS0FBSyxDQUNYLEtBQUssRUFDTDtRQUNFLFVBQVUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUM7S0FDbkMsRUFDRCxzQ0FBb0IsQ0FDckIsQ0FBQztJQUVGLE9BQU8sQ0FBQyxJQUFJLENBQ1YsYUFBYSxFQUNiO1FBQ0UsVUFBVSxFQUFFLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQztLQUNuQyxFQUNELDJDQUF5QixDQUMxQixDQUFDO0lBRUYsT0FBTyxDQUFDLE1BQU0sQ0FDWixLQUFLLEVBQ0w7UUFDRSxVQUFVLEVBQUUsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDO0tBQ25DLEVBQ0QsbUNBQWlCLENBQ2xCLENBQUM7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmFzdGlmeUluc3RhbmNlIH0gZnJvbSAnZmFzdGlmeSc7XHJcbmltcG9ydCB7XHJcbiAgY29tcGxldGVPbmJvYXJkaW5nSGFuZGxlcixcclxuICBnZXRNZUhhbmRsZXIsXHJcbiAgdXBkYXRlUHJvZmlsZUhhbmRsZXIsXHJcbiAgZGVsZXRlVXNlckhhbmRsZXIsXHJcbiAgZ2V0Q3JlZGl0c0hhbmRsZXIsXHJcbiAgaW5pdFByb2ZpbGVIYW5kbGVyLFxyXG4gIGdldEFsbFVzZXJzSGFuZGxlcixcclxuICBnZXRVc2VyUHJvZmlsZUFkbWluSGFuZGxlcixcclxufSBmcm9tICcuL3VzZXIuY29udHJvbGxlcic7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXNlclJvdXRlcyhmYXN0aWZ5OiBGYXN0aWZ5SW5zdGFuY2UpIHtcclxuICAvLyBBZG1pbiBSb3V0ZXNcclxuICBmYXN0aWZ5LmdldChcclxuICAgICcvYWRtaW4vdXNlcnMnLFxyXG4gICAge1xyXG4gICAgICBwcmVIYW5kbGVyOiBbZmFzdGlmeS5hdXRoZW50aWNhdGUsIGZhc3RpZnkuYXV0aG9yaXplKFsnc3VwZXJfYWRtaW4nLCAnb3JnX2FkbWluJ10pXSxcclxuICAgIH0sXHJcbiAgICBnZXRBbGxVc2Vyc0hhbmRsZXJcclxuICApO1xyXG5cclxuICBmYXN0aWZ5LmdldChcclxuICAgICcvYWRtaW4vdXNlcnMvOnVzZXJJZCcsXHJcbiAgICB7XHJcbiAgICAgIHByZUhhbmRsZXI6IFtmYXN0aWZ5LmF1dGhlbnRpY2F0ZSwgZmFzdGlmeS5hdXRob3JpemUoWydzdXBlcl9hZG1pbicsICdvcmdfYWRtaW4nXSldLFxyXG4gICAgfSxcclxuICAgIGdldFVzZXJQcm9maWxlQWRtaW5IYW5kbGVyXHJcbiAgKTtcclxuXHJcbiAgLy8gVXNlciBSb3V0ZXNcclxuICBmYXN0aWZ5LnBvc3QoXHJcbiAgICAnL2luaXQnLFxyXG4gICAge1xyXG4gICAgICBwcmVIYW5kbGVyOiBbZmFzdGlmeS5hdXRoZW50aWNhdGVdLFxyXG4gICAgfSxcclxuICAgIGluaXRQcm9maWxlSGFuZGxlclxyXG4gICk7XHJcblxyXG4gIGZhc3RpZnkuZ2V0KFxyXG4gICAgJy9tZScsXHJcbiAgICB7XHJcbiAgICAgIHByZUhhbmRsZXI6IFtmYXN0aWZ5LmF1dGhlbnRpY2F0ZV0sXHJcbiAgICB9LFxyXG4gICAgZ2V0TWVIYW5kbGVyXHJcbiAgKTtcclxuXHJcbiAgZmFzdGlmeS5nZXQoXHJcbiAgICAnL2NyZWRpdHMnLFxyXG4gICAge1xyXG4gICAgICBwcmVIYW5kbGVyOiBbZmFzdGlmeS5hdXRoZW50aWNhdGVdLFxyXG4gICAgfSxcclxuICAgIGdldENyZWRpdHNIYW5kbGVyXHJcbiAgKTtcclxuXHJcbiAgZmFzdGlmeS5wYXRjaChcclxuICAgICcvbWUnLFxyXG4gICAge1xyXG4gICAgICBwcmVIYW5kbGVyOiBbZmFzdGlmeS5hdXRoZW50aWNhdGVdLFxyXG4gICAgfSxcclxuICAgIHVwZGF0ZVByb2ZpbGVIYW5kbGVyXHJcbiAgKTtcclxuXHJcbiAgZmFzdGlmeS5wb3N0KFxyXG4gICAgJy9vbmJvYXJkaW5nJyxcclxuICAgIHtcclxuICAgICAgcHJlSGFuZGxlcjogW2Zhc3RpZnkuYXV0aGVudGljYXRlXSxcclxuICAgIH0sXHJcbiAgICBjb21wbGV0ZU9uYm9hcmRpbmdIYW5kbGVyXHJcbiAgKTtcclxuXHJcbiAgZmFzdGlmeS5kZWxldGUoXHJcbiAgICAnL21lJyxcclxuICAgIHtcclxuICAgICAgcHJlSGFuZGxlcjogW2Zhc3RpZnkuYXV0aGVudGljYXRlXSxcclxuICAgIH0sXHJcbiAgICBkZWxldGVVc2VySGFuZGxlclxyXG4gICk7XHJcbn1cclxuIl19