"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.sessionRoutes = sessionRoutes;
const sessions_controller_1 = require("./sessions.controller");
const sessions_schema_1 = require("./sessions.schema");
async function sessionRoutes(app) {
    app.get('/admin/users/:userId/sessions', {
        preHandler: [app.authenticate, app.authorize(['super_admin', 'org_admin'])],
    }, sessions_controller_1.getUserSessionsHandler);
    app.post('/', {
        schema: {
            body: sessions_schema_1.createSessionSchema,
        },
        preHandler: [app.authenticate],
    }, sessions_controller_1.createSessionHandler);
    app.post('/schedule', {
        schema: {
            body: sessions_schema_1.createSessionSchema,
        },
        preHandler: [app.authenticate],
    }, sessions_controller_1.scheduleSessionHandler);
    app.get('/', {
        preHandler: [app.authenticate],
    }, sessions_controller_1.getSessionsHandler);
    app.get('/:id', {
        preHandler: [app.authenticate],
    }, sessions_controller_1.getSessionHandler);
    app.post('/:id/end', {
        schema: {
            body: sessions_schema_1.endSessionSchema,
        },
        preHandler: [app.authenticate],
    }, sessions_controller_1.endSessionHandler);
    app.post('/:id/messages', {
        schema: {
            body: sessions_schema_1.createMessageSchema,
        },
        preHandler: [app.authenticate],
    }, sessions_controller_1.createMessageHandler);
    app.get('/:id/transcript', {
        preHandler: [app.authenticate],
    }, sessions_controller_1.getSessionTranscriptHandler);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzovVXNlcnMvU2FpZiBBbGkvRG9jdW1lbnRzL0dpdEh1Yi9NZWV0RXpyaS9hcHBzL2FwaS9zcmMvbW9kdWxlcy9zZXNzaW9ucy9zZXNzaW9ucy5yb3V0ZXMudHMiLCJzb3VyY2VzIjpbIkM6L1VzZXJzL1NhaWYgQWxpL0RvY3VtZW50cy9HaXRIdWIvTWVldEV6cmkvYXBwcy9hcGkvc3JjL21vZHVsZXMvc2Vzc2lvbnMvc2Vzc2lvbnMucm91dGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBSUEsc0NBNEVDO0FBL0VELCtEQUEwTjtBQUMxTix1REFBK0Y7QUFFeEYsS0FBSyxVQUFVLGFBQWEsQ0FBQyxHQUFvQjtJQUN0RCxHQUFHLENBQUMsR0FBRyxDQUNMLCtCQUErQixFQUMvQjtRQUNFLFVBQVUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLGFBQWEsRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFDO0tBQzVFLEVBQ0QsNENBQXNCLENBQ3ZCLENBQUM7SUFFRixHQUFHLENBQUMsSUFBSSxDQUNOLEdBQUcsRUFDSDtRQUNFLE1BQU0sRUFBRTtZQUNOLElBQUksRUFBRSxxQ0FBbUI7U0FDMUI7UUFDRCxVQUFVLEVBQUUsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDO0tBQy9CLEVBQ0QsMENBQW9CLENBQ3JCLENBQUM7SUFFRixHQUFHLENBQUMsSUFBSSxDQUNOLFdBQVcsRUFDWDtRQUNFLE1BQU0sRUFBRTtZQUNOLElBQUksRUFBRSxxQ0FBbUI7U0FDMUI7UUFDRCxVQUFVLEVBQUUsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDO0tBQy9CLEVBQ0QsNENBQXNCLENBQ3ZCLENBQUM7SUFFRixHQUFHLENBQUMsR0FBRyxDQUNMLEdBQUcsRUFDSDtRQUNFLFVBQVUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUM7S0FDL0IsRUFDRCx3Q0FBa0IsQ0FDbkIsQ0FBQztJQUVGLEdBQUcsQ0FBQyxHQUFHLENBQ0wsTUFBTSxFQUNOO1FBQ0ksVUFBVSxFQUFFLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQztLQUNqQyxFQUNELHVDQUFpQixDQUNsQixDQUFDO0lBRUYsR0FBRyxDQUFDLElBQUksQ0FDTixVQUFVLEVBQ1Y7UUFDRSxNQUFNLEVBQUU7WUFDTixJQUFJLEVBQUUsa0NBQWdCO1NBQ3ZCO1FBQ0QsVUFBVSxFQUFFLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQztLQUMvQixFQUNELHVDQUFpQixDQUNsQixDQUFDO0lBRUYsR0FBRyxDQUFDLElBQUksQ0FDTixlQUFlLEVBQ2Y7UUFDRSxNQUFNLEVBQUU7WUFDTixJQUFJLEVBQUUscUNBQW1CO1NBQzFCO1FBQ0QsVUFBVSxFQUFFLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQztLQUMvQixFQUNELDBDQUFvQixDQUNyQixDQUFDO0lBRUYsR0FBRyxDQUFDLEdBQUcsQ0FDTCxpQkFBaUIsRUFDakI7UUFDRSxVQUFVLEVBQUUsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDO0tBQy9CLEVBQ0QsaURBQTJCLENBQzVCLENBQUM7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmFzdGlmeUluc3RhbmNlIH0gZnJvbSAnZmFzdGlmeSc7XHJcbmltcG9ydCB7IGNyZWF0ZVNlc3Npb25IYW5kbGVyLCBnZXRTZXNzaW9uc0hhbmRsZXIsIGdldFNlc3Npb25IYW5kbGVyLCBlbmRTZXNzaW9uSGFuZGxlciwgY3JlYXRlTWVzc2FnZUhhbmRsZXIsIGdldFNlc3Npb25UcmFuc2NyaXB0SGFuZGxlciwgc2NoZWR1bGVTZXNzaW9uSGFuZGxlciwgZ2V0VXNlclNlc3Npb25zSGFuZGxlciB9IGZyb20gJy4vc2Vzc2lvbnMuY29udHJvbGxlcic7XHJcbmltcG9ydCB7IGNyZWF0ZVNlc3Npb25TY2hlbWEsIGVuZFNlc3Npb25TY2hlbWEsIGNyZWF0ZU1lc3NhZ2VTY2hlbWEgfSBmcm9tICcuL3Nlc3Npb25zLnNjaGVtYSc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2Vzc2lvblJvdXRlcyhhcHA6IEZhc3RpZnlJbnN0YW5jZSkge1xyXG4gIGFwcC5nZXQoXHJcbiAgICAnL2FkbWluL3VzZXJzLzp1c2VySWQvc2Vzc2lvbnMnLFxyXG4gICAge1xyXG4gICAgICBwcmVIYW5kbGVyOiBbYXBwLmF1dGhlbnRpY2F0ZSwgYXBwLmF1dGhvcml6ZShbJ3N1cGVyX2FkbWluJywgJ29yZ19hZG1pbiddKV0sXHJcbiAgICB9LFxyXG4gICAgZ2V0VXNlclNlc3Npb25zSGFuZGxlclxyXG4gICk7XHJcblxyXG4gIGFwcC5wb3N0KFxyXG4gICAgJy8nLFxyXG4gICAge1xyXG4gICAgICBzY2hlbWE6IHtcclxuICAgICAgICBib2R5OiBjcmVhdGVTZXNzaW9uU2NoZW1hLFxyXG4gICAgICB9LFxyXG4gICAgICBwcmVIYW5kbGVyOiBbYXBwLmF1dGhlbnRpY2F0ZV0sXHJcbiAgICB9LFxyXG4gICAgY3JlYXRlU2Vzc2lvbkhhbmRsZXJcclxuICApO1xyXG5cclxuICBhcHAucG9zdChcclxuICAgICcvc2NoZWR1bGUnLFxyXG4gICAge1xyXG4gICAgICBzY2hlbWE6IHtcclxuICAgICAgICBib2R5OiBjcmVhdGVTZXNzaW9uU2NoZW1hLFxyXG4gICAgICB9LFxyXG4gICAgICBwcmVIYW5kbGVyOiBbYXBwLmF1dGhlbnRpY2F0ZV0sXHJcbiAgICB9LFxyXG4gICAgc2NoZWR1bGVTZXNzaW9uSGFuZGxlclxyXG4gICk7XHJcblxyXG4gIGFwcC5nZXQoXHJcbiAgICAnLycsXHJcbiAgICB7XHJcbiAgICAgIHByZUhhbmRsZXI6IFthcHAuYXV0aGVudGljYXRlXSxcclxuICAgIH0sXHJcbiAgICBnZXRTZXNzaW9uc0hhbmRsZXJcclxuICApO1xyXG5cclxuICBhcHAuZ2V0KFxyXG4gICAgJy86aWQnLFxyXG4gICAge1xyXG4gICAgICAgIHByZUhhbmRsZXI6IFthcHAuYXV0aGVudGljYXRlXSxcclxuICAgIH0sXHJcbiAgICBnZXRTZXNzaW9uSGFuZGxlclxyXG4gICk7XHJcblxyXG4gIGFwcC5wb3N0KFxyXG4gICAgJy86aWQvZW5kJyxcclxuICAgIHtcclxuICAgICAgc2NoZW1hOiB7XHJcbiAgICAgICAgYm9keTogZW5kU2Vzc2lvblNjaGVtYSxcclxuICAgICAgfSxcclxuICAgICAgcHJlSGFuZGxlcjogW2FwcC5hdXRoZW50aWNhdGVdLFxyXG4gICAgfSxcclxuICAgIGVuZFNlc3Npb25IYW5kbGVyXHJcbiAgKTtcclxuXHJcbiAgYXBwLnBvc3QoXHJcbiAgICAnLzppZC9tZXNzYWdlcycsXHJcbiAgICB7XHJcbiAgICAgIHNjaGVtYToge1xyXG4gICAgICAgIGJvZHk6IGNyZWF0ZU1lc3NhZ2VTY2hlbWEsXHJcbiAgICAgIH0sXHJcbiAgICAgIHByZUhhbmRsZXI6IFthcHAuYXV0aGVudGljYXRlXSxcclxuICAgIH0sXHJcbiAgICBjcmVhdGVNZXNzYWdlSGFuZGxlclxyXG4gICk7XHJcblxyXG4gIGFwcC5nZXQoXHJcbiAgICAnLzppZC90cmFuc2NyaXB0JyxcclxuICAgIHtcclxuICAgICAgcHJlSGFuZGxlcjogW2FwcC5hdXRoZW50aWNhdGVdLFxyXG4gICAgfSxcclxuICAgIGdldFNlc3Npb25UcmFuc2NyaXB0SGFuZGxlclxyXG4gICk7XHJcbn1cclxuIl19