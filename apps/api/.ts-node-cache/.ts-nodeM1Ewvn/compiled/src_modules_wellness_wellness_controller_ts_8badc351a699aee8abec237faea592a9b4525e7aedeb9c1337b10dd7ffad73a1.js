"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createWellnessToolHandler = createWellnessToolHandler;
exports.getWellnessToolsHandler = getWellnessToolsHandler;
exports.getWellnessToolByIdHandler = getWellnessToolByIdHandler;
exports.updateWellnessToolHandler = updateWellnessToolHandler;
exports.deleteWellnessToolHandler = deleteWellnessToolHandler;
const wellness_service_1 = require("./wellness.service");
async function createWellnessToolHandler(request, reply) {
    const tool = await (0, wellness_service_1.createWellnessTool)({
        ...request.body,
        created_by: request.user.id
    });
    return reply.code(201).send(tool);
}
async function getWellnessToolsHandler(request, reply) {
    const tools = await (0, wellness_service_1.getWellnessTools)(request.query.category);
    return reply.send(tools);
}
async function getWellnessToolByIdHandler(request, reply) {
    const tool = await (0, wellness_service_1.getWellnessToolById)(request.params.id);
    if (!tool) {
        return reply.code(404).send({ message: 'Wellness tool not found' });
    }
    return reply.send(tool);
}
async function updateWellnessToolHandler(request, reply) {
    try {
        const tool = await (0, wellness_service_1.updateWellnessTool)(request.params.id, request.body);
        return reply.send(tool);
    }
    catch (error) {
        return reply.code(404).send({ message: 'Wellness tool not found' });
    }
}
async function deleteWellnessToolHandler(request, reply) {
    try {
        await (0, wellness_service_1.deleteWellnessTool)(request.params.id);
        return reply.code(204).send();
    }
    catch (error) {
        return reply.code(404).send({ message: 'Wellness tool not found' });
    }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzovVXNlcnMvU2FpZiBBbGkvRG9jdW1lbnRzL0dpdEh1Yi9NZWV0RXpyaS9hcHBzL2FwaS9zcmMvbW9kdWxlcy93ZWxsbmVzcy93ZWxsbmVzcy5jb250cm9sbGVyLnRzIiwic291cmNlcyI6WyJDOi9Vc2Vycy9TYWlmIEFsaS9Eb2N1bWVudHMvR2l0SHViL01lZXRFenJpL2FwcHMvYXBpL3NyYy9tb2R1bGVzL3dlbGxuZXNzL3dlbGxuZXNzLmNvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFJQSw4REFTQztBQUVELDBEQU1DO0FBRUQsZ0VBU0M7QUFFRCw4REFVQztBQUVELDhEQVVDO0FBdkRELHlEQUF1STtBQUdoSSxLQUFLLFVBQVUseUJBQXlCLENBQzdDLE9BQTBELEVBQzFELEtBQW1CO0lBRW5CLE1BQU0sSUFBSSxHQUFHLE1BQU0sSUFBQSxxQ0FBa0IsRUFBQztRQUNwQyxHQUFHLE9BQU8sQ0FBQyxJQUFJO1FBQ2YsVUFBVSxFQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtLQUM1QixDQUFDLENBQUM7SUFDSCxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3BDLENBQUM7QUFFTSxLQUFLLFVBQVUsdUJBQXVCLENBQzNDLE9BQStELEVBQy9ELEtBQW1CO0lBRW5CLE1BQU0sS0FBSyxHQUFHLE1BQU0sSUFBQSxtQ0FBZ0IsRUFBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzdELE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUMzQixDQUFDO0FBRU0sS0FBSyxVQUFVLDBCQUEwQixDQUM5QyxPQUFtRCxFQUNuRCxLQUFtQjtJQUVuQixNQUFNLElBQUksR0FBRyxNQUFNLElBQUEsc0NBQW1CLEVBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUMxRCxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDVixPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsT0FBTyxFQUFFLHlCQUF5QixFQUFFLENBQUMsQ0FBQztJQUN0RSxDQUFDO0lBQ0QsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzFCLENBQUM7QUFFTSxLQUFLLFVBQVUseUJBQXlCLENBQzdDLE9BQWtGLEVBQ2xGLEtBQW1CO0lBRW5CLElBQUksQ0FBQztRQUNILE1BQU0sSUFBSSxHQUFHLE1BQU0sSUFBQSxxQ0FBa0IsRUFBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdkUsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzFCLENBQUM7SUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1FBQ2YsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxDQUFDLENBQUM7SUFDdEUsQ0FBQztBQUNILENBQUM7QUFFTSxLQUFLLFVBQVUseUJBQXlCLENBQzdDLE9BQW1ELEVBQ25ELEtBQW1CO0lBRW5CLElBQUksQ0FBQztRQUNILE1BQU0sSUFBQSxxQ0FBa0IsRUFBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQzVDLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNoQyxDQUFDO0lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztRQUNmLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPLEVBQUUseUJBQXlCLEVBQUUsQ0FBQyxDQUFDO0lBQ3RFLENBQUM7QUFDSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmFzdGlmeVJlcGx5LCBGYXN0aWZ5UmVxdWVzdCB9IGZyb20gJ2Zhc3RpZnknO1xuaW1wb3J0IHsgY3JlYXRlV2VsbG5lc3NUb29sLCBkZWxldGVXZWxsbmVzc1Rvb2wsIGdldFdlbGxuZXNzVG9vbEJ5SWQsIGdldFdlbGxuZXNzVG9vbHMsIHVwZGF0ZVdlbGxuZXNzVG9vbCB9IGZyb20gJy4vd2VsbG5lc3Muc2VydmljZSc7XG5pbXBvcnQgeyBDcmVhdGVXZWxsbmVzc1Rvb2xJbnB1dCwgVXBkYXRlV2VsbG5lc3NUb29sSW5wdXQgfSBmcm9tICcuL3dlbGxuZXNzLnNjaGVtYSc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVXZWxsbmVzc1Rvb2xIYW5kbGVyKFxuICByZXF1ZXN0OiBGYXN0aWZ5UmVxdWVzdDx7IEJvZHk6IENyZWF0ZVdlbGxuZXNzVG9vbElucHV0IH0+LFxuICByZXBseTogRmFzdGlmeVJlcGx5XG4pIHtcbiAgY29uc3QgdG9vbCA9IGF3YWl0IGNyZWF0ZVdlbGxuZXNzVG9vbCh7XG4gICAgLi4ucmVxdWVzdC5ib2R5LFxuICAgIGNyZWF0ZWRfYnk6IHJlcXVlc3QudXNlci5pZFxuICB9KTtcbiAgcmV0dXJuIHJlcGx5LmNvZGUoMjAxKS5zZW5kKHRvb2wpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0V2VsbG5lc3NUb29sc0hhbmRsZXIoXG4gIHJlcXVlc3Q6IEZhc3RpZnlSZXF1ZXN0PHsgUXVlcnlzdHJpbmc6IHsgY2F0ZWdvcnk/OiBzdHJpbmcgfSB9PixcbiAgcmVwbHk6IEZhc3RpZnlSZXBseVxuKSB7XG4gIGNvbnN0IHRvb2xzID0gYXdhaXQgZ2V0V2VsbG5lc3NUb29scyhyZXF1ZXN0LnF1ZXJ5LmNhdGVnb3J5KTtcbiAgcmV0dXJuIHJlcGx5LnNlbmQodG9vbHMpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0V2VsbG5lc3NUb29sQnlJZEhhbmRsZXIoXG4gIHJlcXVlc3Q6IEZhc3RpZnlSZXF1ZXN0PHsgUGFyYW1zOiB7IGlkOiBzdHJpbmcgfSB9PixcbiAgcmVwbHk6IEZhc3RpZnlSZXBseVxuKSB7XG4gIGNvbnN0IHRvb2wgPSBhd2FpdCBnZXRXZWxsbmVzc1Rvb2xCeUlkKHJlcXVlc3QucGFyYW1zLmlkKTtcbiAgaWYgKCF0b29sKSB7XG4gICAgcmV0dXJuIHJlcGx5LmNvZGUoNDA0KS5zZW5kKHsgbWVzc2FnZTogJ1dlbGxuZXNzIHRvb2wgbm90IGZvdW5kJyB9KTtcbiAgfVxuICByZXR1cm4gcmVwbHkuc2VuZCh0b29sKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVdlbGxuZXNzVG9vbEhhbmRsZXIoXG4gIHJlcXVlc3Q6IEZhc3RpZnlSZXF1ZXN0PHsgUGFyYW1zOiB7IGlkOiBzdHJpbmcgfTsgQm9keTogVXBkYXRlV2VsbG5lc3NUb29sSW5wdXQgfT4sXG4gIHJlcGx5OiBGYXN0aWZ5UmVwbHlcbikge1xuICB0cnkge1xuICAgIGNvbnN0IHRvb2wgPSBhd2FpdCB1cGRhdGVXZWxsbmVzc1Rvb2wocmVxdWVzdC5wYXJhbXMuaWQsIHJlcXVlc3QuYm9keSk7XG4gICAgcmV0dXJuIHJlcGx5LnNlbmQodG9vbCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHJlcGx5LmNvZGUoNDA0KS5zZW5kKHsgbWVzc2FnZTogJ1dlbGxuZXNzIHRvb2wgbm90IGZvdW5kJyB9KTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlV2VsbG5lc3NUb29sSGFuZGxlcihcbiAgcmVxdWVzdDogRmFzdGlmeVJlcXVlc3Q8eyBQYXJhbXM6IHsgaWQ6IHN0cmluZyB9IH0+LFxuICByZXBseTogRmFzdGlmeVJlcGx5XG4pIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBkZWxldGVXZWxsbmVzc1Rvb2wocmVxdWVzdC5wYXJhbXMuaWQpO1xuICAgIHJldHVybiByZXBseS5jb2RlKDIwNCkuc2VuZCgpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiByZXBseS5jb2RlKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdXZWxsbmVzcyB0b29sIG5vdCBmb3VuZCcgfSk7XG4gIH1cbn1cbiJdfQ==