"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createWellnessToolHandler = createWellnessToolHandler;
exports.getWellnessToolsHandler = getWellnessToolsHandler;
exports.getWellnessToolByIdHandler = getWellnessToolByIdHandler;
exports.updateWellnessToolHandler = updateWellnessToolHandler;
exports.deleteWellnessToolHandler = deleteWellnessToolHandler;
exports.trackWellnessProgressHandler = trackWellnessProgressHandler;
const wellness_service_1 = require("./wellness.service");
async function createWellnessToolHandler(request, reply) {
    const tool = await (0, wellness_service_1.createWellnessTool)({
        ...request.body,
        created_by: request.user.id
    });
    return reply.code(201).send(tool);
}
async function getWellnessToolsHandler(request, reply) {
    const tools = await (0, wellness_service_1.getWellnessTools)(request.query.category);
    return reply.send(tools);
}
async function getWellnessToolByIdHandler(request, reply) {
    const tool = await (0, wellness_service_1.getWellnessToolById)(request.params.id);
    if (!tool) {
        return reply.code(404).send({ message: 'Wellness tool not found' });
    }
    return reply.send(tool);
}
async function updateWellnessToolHandler(request, reply) {
    try {
        const tool = await (0, wellness_service_1.updateWellnessTool)(request.params.id, request.body);
        return reply.send(tool);
    }
    catch (error) {
        return reply.code(404).send({ message: 'Wellness tool not found' });
    }
}
async function deleteWellnessToolHandler(request, reply) {
    try {
        await (0, wellness_service_1.deleteWellnessTool)(request.params.id);
        return reply.code(204).send();
    }
    catch (error) {
        return reply.code(404).send({ message: 'Wellness tool not found' });
    }
}
async function trackWellnessProgressHandler(request, reply) {
    try {
        const progress = await (0, wellness_service_1.trackWellnessProgress)(request.user.id, request.params.id, request.body.duration_spent, request.body.feedback_rating);
        return reply.code(201).send(progress);
    }
    catch (error) {
        return reply.code(404).send({ message: 'Wellness tool not found' });
    }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzovVXNlcnMvU2FpZiBBbGkvRG9jdW1lbnRzL0dpdEh1Yi9NZWV0RXpyaS9hcHBzL2FwaS9zcmMvbW9kdWxlcy93ZWxsbmVzcy93ZWxsbmVzcy5jb250cm9sbGVyLnRzIiwic291cmNlcyI6WyJDOi9Vc2Vycy9TYWlmIEFsaS9Eb2N1bWVudHMvR2l0SHViL01lZXRFenJpL2FwcHMvYXBpL3NyYy9tb2R1bGVzL3dlbGxuZXNzL3dlbGxuZXNzLmNvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFJQSw4REFTQztBQUVELDBEQU1DO0FBRUQsZ0VBU0M7QUFFRCw4REFVQztBQUVELDhEQVVDO0FBRUQsb0VBZUM7QUF4RUQseURBQThKO0FBR3ZKLEtBQUssVUFBVSx5QkFBeUIsQ0FDN0MsT0FBMEQsRUFDMUQsS0FBbUI7SUFFbkIsTUFBTSxJQUFJLEdBQUcsTUFBTSxJQUFBLHFDQUFrQixFQUFDO1FBQ3BDLEdBQUcsT0FBTyxDQUFDLElBQUk7UUFDZixVQUFVLEVBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO0tBQzVCLENBQUMsQ0FBQztJQUNILE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDcEMsQ0FBQztBQUVNLEtBQUssVUFBVSx1QkFBdUIsQ0FDM0MsT0FBK0QsRUFDL0QsS0FBbUI7SUFFbkIsTUFBTSxLQUFLLEdBQUcsTUFBTSxJQUFBLG1DQUFnQixFQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDN0QsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQzNCLENBQUM7QUFFTSxLQUFLLFVBQVUsMEJBQTBCLENBQzlDLE9BQW1ELEVBQ25ELEtBQW1CO0lBRW5CLE1BQU0sSUFBSSxHQUFHLE1BQU0sSUFBQSxzQ0FBbUIsRUFBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzFELElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNWLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPLEVBQUUseUJBQXlCLEVBQUUsQ0FBQyxDQUFDO0lBQ3RFLENBQUM7SUFDRCxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDMUIsQ0FBQztBQUVNLEtBQUssVUFBVSx5QkFBeUIsQ0FDN0MsT0FBa0YsRUFDbEYsS0FBbUI7SUFFbkIsSUFBSSxDQUFDO1FBQ0gsTUFBTSxJQUFJLEdBQUcsTUFBTSxJQUFBLHFDQUFrQixFQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN2RSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDMUIsQ0FBQztJQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7UUFDZixPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsT0FBTyxFQUFFLHlCQUF5QixFQUFFLENBQUMsQ0FBQztJQUN0RSxDQUFDO0FBQ0gsQ0FBQztBQUVNLEtBQUssVUFBVSx5QkFBeUIsQ0FDN0MsT0FBbUQsRUFDbkQsS0FBbUI7SUFFbkIsSUFBSSxDQUFDO1FBQ0gsTUFBTSxJQUFBLHFDQUFrQixFQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDNUMsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ2hDLENBQUM7SUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1FBQ2YsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxDQUFDLENBQUM7SUFDdEUsQ0FBQztBQUNILENBQUM7QUFFTSxLQUFLLFVBQVUsNEJBQTRCLENBQ2hELE9BQTZFLEVBQzdFLEtBQW1CO0lBRW5CLElBQUksQ0FBQztRQUNILE1BQU0sUUFBUSxHQUFHLE1BQU0sSUFBQSx3Q0FBcUIsRUFDMUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQ2YsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQ2pCLE9BQU8sQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUMzQixPQUFPLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FDN0IsQ0FBQztRQUNGLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDeEMsQ0FBQztJQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7UUFDZixPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsT0FBTyxFQUFFLHlCQUF5QixFQUFFLENBQUMsQ0FBQztJQUN0RSxDQUFDO0FBQ0gsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZhc3RpZnlSZXBseSwgRmFzdGlmeVJlcXVlc3QgfSBmcm9tICdmYXN0aWZ5JztcbmltcG9ydCB7IGNyZWF0ZVdlbGxuZXNzVG9vbCwgZGVsZXRlV2VsbG5lc3NUb29sLCBnZXRXZWxsbmVzc1Rvb2xCeUlkLCBnZXRXZWxsbmVzc1Rvb2xzLCB1cGRhdGVXZWxsbmVzc1Rvb2wsIHRyYWNrV2VsbG5lc3NQcm9ncmVzcyB9IGZyb20gJy4vd2VsbG5lc3Muc2VydmljZSc7XG5pbXBvcnQgeyBDcmVhdGVXZWxsbmVzc1Rvb2xJbnB1dCwgVXBkYXRlV2VsbG5lc3NUb29sSW5wdXQsIFRyYWNrUHJvZ3Jlc3NJbnB1dCB9IGZyb20gJy4vd2VsbG5lc3Muc2NoZW1hJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVdlbGxuZXNzVG9vbEhhbmRsZXIoXG4gIHJlcXVlc3Q6IEZhc3RpZnlSZXF1ZXN0PHsgQm9keTogQ3JlYXRlV2VsbG5lc3NUb29sSW5wdXQgfT4sXG4gIHJlcGx5OiBGYXN0aWZ5UmVwbHlcbikge1xuICBjb25zdCB0b29sID0gYXdhaXQgY3JlYXRlV2VsbG5lc3NUb29sKHtcbiAgICAuLi5yZXF1ZXN0LmJvZHksXG4gICAgY3JlYXRlZF9ieTogcmVxdWVzdC51c2VyLmlkXG4gIH0pO1xuICByZXR1cm4gcmVwbHkuY29kZSgyMDEpLnNlbmQodG9vbCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRXZWxsbmVzc1Rvb2xzSGFuZGxlcihcbiAgcmVxdWVzdDogRmFzdGlmeVJlcXVlc3Q8eyBRdWVyeXN0cmluZzogeyBjYXRlZ29yeT86IHN0cmluZyB9IH0+LFxuICByZXBseTogRmFzdGlmeVJlcGx5XG4pIHtcbiAgY29uc3QgdG9vbHMgPSBhd2FpdCBnZXRXZWxsbmVzc1Rvb2xzKHJlcXVlc3QucXVlcnkuY2F0ZWdvcnkpO1xuICByZXR1cm4gcmVwbHkuc2VuZCh0b29scyk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRXZWxsbmVzc1Rvb2xCeUlkSGFuZGxlcihcbiAgcmVxdWVzdDogRmFzdGlmeVJlcXVlc3Q8eyBQYXJhbXM6IHsgaWQ6IHN0cmluZyB9IH0+LFxuICByZXBseTogRmFzdGlmeVJlcGx5XG4pIHtcbiAgY29uc3QgdG9vbCA9IGF3YWl0IGdldFdlbGxuZXNzVG9vbEJ5SWQocmVxdWVzdC5wYXJhbXMuaWQpO1xuICBpZiAoIXRvb2wpIHtcbiAgICByZXR1cm4gcmVwbHkuY29kZSg0MDQpLnNlbmQoeyBtZXNzYWdlOiAnV2VsbG5lc3MgdG9vbCBub3QgZm91bmQnIH0pO1xuICB9XG4gIHJldHVybiByZXBseS5zZW5kKHRvb2wpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlV2VsbG5lc3NUb29sSGFuZGxlcihcbiAgcmVxdWVzdDogRmFzdGlmeVJlcXVlc3Q8eyBQYXJhbXM6IHsgaWQ6IHN0cmluZyB9OyBCb2R5OiBVcGRhdGVXZWxsbmVzc1Rvb2xJbnB1dCB9PixcbiAgcmVwbHk6IEZhc3RpZnlSZXBseVxuKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdG9vbCA9IGF3YWl0IHVwZGF0ZVdlbGxuZXNzVG9vbChyZXF1ZXN0LnBhcmFtcy5pZCwgcmVxdWVzdC5ib2R5KTtcbiAgICByZXR1cm4gcmVwbHkuc2VuZCh0b29sKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gcmVwbHkuY29kZSg0MDQpLnNlbmQoeyBtZXNzYWdlOiAnV2VsbG5lc3MgdG9vbCBub3QgZm91bmQnIH0pO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVXZWxsbmVzc1Rvb2xIYW5kbGVyKFxuICByZXF1ZXN0OiBGYXN0aWZ5UmVxdWVzdDx7IFBhcmFtczogeyBpZDogc3RyaW5nIH0gfT4sXG4gIHJlcGx5OiBGYXN0aWZ5UmVwbHlcbikge1xuICB0cnkge1xuICAgIGF3YWl0IGRlbGV0ZVdlbGxuZXNzVG9vbChyZXF1ZXN0LnBhcmFtcy5pZCk7XG4gICAgcmV0dXJuIHJlcGx5LmNvZGUoMjA0KS5zZW5kKCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHJlcGx5LmNvZGUoNDA0KS5zZW5kKHsgbWVzc2FnZTogJ1dlbGxuZXNzIHRvb2wgbm90IGZvdW5kJyB9KTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdHJhY2tXZWxsbmVzc1Byb2dyZXNzSGFuZGxlcihcbiAgcmVxdWVzdDogRmFzdGlmeVJlcXVlc3Q8eyBQYXJhbXM6IHsgaWQ6IHN0cmluZyB9OyBCb2R5OiBUcmFja1Byb2dyZXNzSW5wdXQgfT4sXG4gIHJlcGx5OiBGYXN0aWZ5UmVwbHlcbikge1xuICB0cnkge1xuICAgIGNvbnN0IHByb2dyZXNzID0gYXdhaXQgdHJhY2tXZWxsbmVzc1Byb2dyZXNzKFxuICAgICAgcmVxdWVzdC51c2VyLmlkLFxuICAgICAgcmVxdWVzdC5wYXJhbXMuaWQsXG4gICAgICByZXF1ZXN0LmJvZHkuZHVyYXRpb25fc3BlbnQsXG4gICAgICByZXF1ZXN0LmJvZHkuZmVlZGJhY2tfcmF0aW5nXG4gICAgKTtcbiAgICByZXR1cm4gcmVwbHkuY29kZSgyMDEpLnNlbmQocHJvZ3Jlc3MpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiByZXBseS5jb2RlKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdXZWxsbmVzcyB0b29sIG5vdCBmb3VuZCcgfSk7XG4gIH1cbn1cbiJdfQ==