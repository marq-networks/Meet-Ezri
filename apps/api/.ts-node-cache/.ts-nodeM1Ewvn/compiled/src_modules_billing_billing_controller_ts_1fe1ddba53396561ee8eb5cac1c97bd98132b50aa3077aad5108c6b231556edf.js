"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getSubscriptionHandler = getSubscriptionHandler;
exports.createSubscriptionHandler = createSubscriptionHandler;
exports.updateSubscriptionHandler = updateSubscriptionHandler;
exports.cancelSubscriptionHandler = cancelSubscriptionHandler;
exports.getBillingHistoryHandler = getBillingHistoryHandler;
exports.getAllSubscriptionsHandler = getAllSubscriptionsHandler;
exports.adminUpdateSubscriptionHandler = adminUpdateSubscriptionHandler;
exports.getSubscriptionByUserIdHandler = getSubscriptionByUserIdHandler;
const billing_service_1 = require("./billing.service");
async function getSubscriptionHandler(request, reply) {
    const user = request.user;
    const subscription = await (0, billing_service_1.getSubscription)(user.id);
    if (!subscription) {
        // Return a default free plan structure if no subscription exists
        return reply.send({
            id: 'default',
            user_id: user.id,
            plan_type: 'free',
            status: 'active',
            start_date: new Date(),
            end_date: null,
            billing_cycle: 'monthly',
            amount: 0,
            next_billing_at: null,
            payment_method: null,
        });
    }
    return reply.send(subscription);
}
async function createSubscriptionHandler(request, reply) {
    const user = request.user;
    const subscription = await (0, billing_service_1.createSubscription)(user.id, request.body);
    return reply.code(201).send(subscription);
}
async function updateSubscriptionHandler(request, reply) {
    const user = request.user;
    try {
        const subscription = await (0, billing_service_1.updateSubscription)(user.id, request.body);
        return reply.send(subscription);
    }
    catch (error) {
        return reply.code(404).send({ message: 'Active subscription not found' });
    }
}
async function cancelSubscriptionHandler(request, reply) {
    const user = request.user;
    try {
        await (0, billing_service_1.cancelSubscription)(user.id);
        return reply.code(200).send({ message: 'Subscription cancelled' });
    }
    catch (error) {
        return reply.code(404).send({ message: 'Active subscription not found' });
    }
}
async function getBillingHistoryHandler(request, reply) {
    const user = request.user;
    const history = await (0, billing_service_1.getBillingHistory)(user.id);
    return reply.send(history);
}
async function getAllSubscriptionsHandler(request, reply) {
    // In a real app, check for admin role here if not done in preHandler
    const subscriptions = await (0, billing_service_1.getAllSubscriptions)();
    return reply.send(subscriptions);
}
async function adminUpdateSubscriptionHandler(request, reply) {
    try {
        const subscription = await (0, billing_service_1.updateSubscriptionById)(request.params.id, request.body);
        return reply.send(subscription);
    }
    catch (error) {
        return reply.code(404).send({ message: 'Subscription not found' });
    }
}
async function getSubscriptionByUserIdHandler(request, reply) {
    const { userId } = request.params;
    const subscription = await (0, billing_service_1.getSubscription)(userId);
    if (!subscription) {
        // Return a default free plan structure if no subscription exists
        return reply.send({
            id: 'default',
            user_id: userId,
            plan_type: 'free',
            status: 'active',
            start_date: new Date(),
            end_date: null,
            billing_cycle: 'monthly',
            amount: 0,
            next_billing_at: null,
            payment_method: null,
        });
    }
    return reply.send(subscription);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzovVXNlcnMvU2FpZiBBbGkvRG9jdW1lbnRzL0dpdEh1Yi9NZWV0RXpyaS9hcHBzL2FwaS9zcmMvbW9kdWxlcy9iaWxsaW5nL2JpbGxpbmcuY29udHJvbGxlci50cyIsInNvdXJjZXMiOlsiQzovVXNlcnMvU2FpZiBBbGkvRG9jdW1lbnRzL0dpdEh1Yi9NZWV0RXpyaS9hcHBzL2FwaS9zcmMvbW9kdWxlcy9iaWxsaW5nL2JpbGxpbmcuY29udHJvbGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUlBLHdEQXdCQztBQUVELDhEQU9DO0FBRUQsOERBV0M7QUFFRCw4REFXQztBQUVELDREQU9DO0FBRUQsZ0VBT0M7QUFFRCx3RUFVQztBQUVELHdFQXdCQztBQXRIRCx1REFBZ0w7QUFHekssS0FBSyxVQUFVLHNCQUFzQixDQUMxQyxPQUF1QixFQUN2QixLQUFtQjtJQUVuQixNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsSUFBc0IsQ0FBQztJQUM1QyxNQUFNLFlBQVksR0FBRyxNQUFNLElBQUEsaUNBQWUsRUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7SUFFcEQsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ2xCLGlFQUFpRTtRQUNqRSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUM7WUFDaEIsRUFBRSxFQUFFLFNBQVM7WUFDYixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUU7WUFDaEIsU0FBUyxFQUFFLE1BQU07WUFDakIsTUFBTSxFQUFFLFFBQVE7WUFDaEIsVUFBVSxFQUFFLElBQUksSUFBSSxFQUFFO1lBQ3RCLFFBQVEsRUFBRSxJQUFJO1lBQ2QsYUFBYSxFQUFFLFNBQVM7WUFDeEIsTUFBTSxFQUFFLENBQUM7WUFDVCxlQUFlLEVBQUUsSUFBSTtZQUNyQixjQUFjLEVBQUUsSUFBSTtTQUNyQixDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQ2xDLENBQUM7QUFFTSxL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LEVBQ3ZELEtBQW1CO0lBRW5CLE1BQU0sRUFBRSxNQUFNLEVBQUUsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDO0lBQ2xDLE1BQU0sWUFBWSxHQUFHLE1BQU0sSUFBQSxpQ0FBZSxFQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRW5ELElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUNsQixpRUFBaUU7UUFDakUsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDO1lBQ2hCLEVBQUUsRUFBRSxTQUFTO1lBQ2IsT0FBTyxFQUFFLE1BQU07WUFDZixTQUFTLEVBQUUsTUFBTTtZQUNqQixNQUFNLEVBQUUsUUFBUTtZQUNoQixVQUFVLEVBQUUsSUFBSSxJQUFJLEVBQUU7WUFDdEIsUUFBUSxFQUFFLElBQUk7WUFDZCxhQUFhLEVBQUUsU0FBUztZQUN4QixNQUFNLEVBQUUsQ0FBQztZQUNULGVBQWUsRUFBRSxJQUFJO1lBQ3JCLGNBQWMsRUFBRSxJQUFJO1NBQ3JCLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDbEMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZhc3RpZnlSZXBseSwgRmFzdGlmeVJlcXVlc3QgfSBmcm9tICdmYXN0aWZ5JztcbmltcG9ydCB7IGNyZWF0ZVN1YnNjcmlwdGlvbiwgY2FuY2VsU3Vic2NyaXB0aW9uLCBnZXRCaWxsaW5nSGlzdG9yeSwgZ2V0U3Vic2NyaXB0aW9uLCB1cGRhdGVTdWJzY3JpcHRpb24sIGdldEFsbFN1YnNjcmlwdGlvbnMsIHVwZGF0ZVN1YnNjcmlwdGlvbkJ5SWQgfSBmcm9tICcuL2JpbGxpbmcuc2VydmljZSc7XG5pbXBvcnQgeyBDcmVhdGVTdWJzY3JpcHRpb25JbnB1dCwgVXBkYXRlU3Vic2NyaXB0aW9uSW5wdXQgfSBmcm9tICcuL2JpbGxpbmcuc2NoZW1hJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN1YnNjcmlwdGlvbkhhbmRsZXIoXG4gIHJlcXVlc3Q6IEZhc3RpZnlSZXF1ZXN0LFxuICByZXBseTogRmFzdGlmeVJlcGx5XG4pIHtcbiAgY29uc3QgdXNlciA9IHJlcXVlc3QudXNlciBhcyB7IGlkOiBzdHJpbmcgfTtcbiAgY29uc3Qgc3Vic2NyaXB0aW9uID0gYXdhaXQgZ2V0U3Vic2NyaXB0aW9uKHVzZXIuaWQpO1xuICBcbiAgaWYgKCFzdWJzY3JpcHRpb24pIHtcbiAgICAvLyBSZXR1cm4gYSBkZWZhdWx0IGZyZWUgcGxhbiBzdHJ1Y3R1cmUgaWYgbm8gc3Vic2NyaXB0aW9uIGV4aXN0c1xuICAgIHJldHVybiByZXBseS5zZW5kKHtcbiAgICAgIGlkOiAnZGVmYXVsdCcsXG4gICAgICB1c2VyX2lkOiB1c2VyLmlkLFxuICAgICAgcGxhbl90eXBlOiAnZnJlZScsXG4gICAgICBzdGF0dXM6ICdhY3RpdmUnLFxuICAgICAgc3RhcnRfZGF0ZTogbmV3IERhdGUoKSxcbiAgICAgIGVuZF9kYXRlOiBudWxsLFxuICAgICAgYmlsbGluZ19jeWNsZTogJ21vbnRobHknLFxuICAgICAgYW1vdW50OiAwLFxuICAgICAgbmV4dF9iaWxsaW5nX2F0OiBudWxsLFxuICAgICAgcGF5bWVudF9tZXRob2Q6IG51bGwsXG4gICAgfSk7XG4gIH1cbiAgXG4gIHJldHVybiByZXBseS5zZW5kKHN1YnNjcmlwdGlvbik7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVTdWJzY3JpcHRpb25IYW5kbGVyKFxuICByZXF1ZXN0OiBGYXN0aWZ5UmVxdWVzdDx7IEJvZHk6IENyZWF0ZVN1YnNjcmlwdGlvbklucHV0IH0+LFxuICByZXBseTogRmFzdGlmeVJlcGx5XG4pIHtcbiAgY29uc3QgdXNlciA9IHJlcXVlc3QudXNlciBhcyB7IGlkOiBzdHJpbmcgfTtcbiAgY29uc3Qgc3Vic2NyaXB0aW9uID0gYXdhaXQgY3JlYXRlU3Vic2NyaXB0aW9uKHVzZXIuaWQsIHJlcXVlc3QuYm9keSk7XG4gIHJldHVybiByZXBseS5jb2RlKDIwMSkuc2VuZChzdWJzY3JpcHRpb24pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlU3Vic2NyaXB0aW9uSGFuZGxlcihcbiAgcmVxdWVzdDogRmFzdGlmeVJlcXVlc3Q8eyBCb2R5OiBVcGRhdGVTdWJzY3JpcHRpb25JbnB1dCB9PixcbiAgcmVwbHk6IEZhc3RpZnlSZXBseVxuKSB7XG4gIGNvbnN0IHVzZXIgPSByZXF1ZXN0LnVzZXIgYXMgeyBpZDogc3RyaW5nIH07XG4gIHRyeSB7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gYXdhaXQgdXBkYXRlU3Vic2NyaXB0aW9uKHVzZXIuaWQsIHJlcXVlc3QuYm9keSk7XG4gICAgcmV0dXJuIHJlcGx5LnNlbmQoc3Vic2NyaXB0aW9uKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gcmVwbHkuY29kZSg0MDQpLnNlbmQoeyBtZXNzYWdlOiAnQWN0aXZlIHN1YnNjcmlwdGlvbiBub3QgZm91bmQnIH0pO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYW5jZWxTdWJzY3JpcHRpb25IYW5kbGVyKFxuICByZXF1ZXN0OiBGYXN0aWZ5UmVxdWVzdCxcbiAgcmVwbHk6IEZhc3RpZnlSZXBseVxuKSB7XG4gIGNvbnN0IHVzZXIgPSByZXF1ZXN0LnVzZXIgYXMgeyBpZDogc3RyaW5nIH07XG4gIHRyeSB7XG4gICAgYXdhaXQgY2FuY2VsU3Vic2NyaXB0aW9uKHVzZXIuaWQpO1xuICAgIHJldHVybiByZXBseS5jb2RlKDIwMCkuc2VuZCh7IG1lc3NhZ2U6ICdTdWJzY3JpcHRpb24gY2FuY2VsbGVkJyB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gcmVwbHkuY29kZSg0MDQpLnNlbmQoeyBtZXNzYWdlOiAnQWN0aXZlIHN1YnNjcmlwdGlvbiBub3QgZm91bmQnIH0pO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRCaWxsaW5nSGlzdG9yeUhhbmRsZXIoXG4gIHJlcXVlc3Q6IEZhc3RpZnlSZXF1ZXN0LFxuICByZXBseTogRmFzdGlmeVJlcGx5XG4pIHtcbiAgY29uc3QgdXNlciA9IHJlcXVlc3QudXNlciBhcyB7IGlkOiBzdHJpbmcgfTtcbiAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IGdldEJpbGxpbmdIaXN0b3J5KHVzZXIuaWQpO1xuICByZXR1cm4gcmVwbHkuc2VuZChoaXN0b3J5KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbFN1YnNjcmlwdGlvbnNIYW5kbGVyKFxuICByZXF1ZXN0OiBGYXN0aWZ5UmVxdWVzdCxcbiAgcmVwbHk6IEZhc3RpZnlSZXBseVxuKSB7XG4gIC8vIEluIGEgcmVhbCBhcHAsIGNoZWNrIGZvciBhZG1pbiByb2xlIGhlcmUgaWYgbm90IGRvbmUgaW4gcHJlSGFuZGxlclxuICBjb25zdCBzdWJzY3JpcHRpb25zID0gYXdhaXQgZ2V0QWxsU3Vic2NyaXB0aW9ucygpO1xuICByZXR1cm4gcmVwbHkuc2VuZChzdWJzY3JpcHRpb25zKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkbWluVXBkYXRlU3Vic2NyaXB0aW9uSGFuZGxlcihcbiAgcmVxdWVzdDogRmFzdGlmeVJlcXVlc3Q8eyBQYXJhbXM6IHsgaWQ6IHN0cmluZyB9LCBCb2R5OiBVcGRhdGVTdWJzY3JpcHRpb25JbnB1dCB9PixcbiAgcmVwbHk6IEZhc3RpZnlSZXBseVxuKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gYXdhaXQgdXBkYXRlU3Vic2NyaXB0aW9uQnlJZChyZXF1ZXN0LnBhcmFtcy5pZCwgcmVxdWVzdC5ib2R5KTtcbiAgICByZXR1cm4gcmVwbHkuc2VuZChzdWJzY3JpcHRpb24pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiByZXBseS5jb2RlKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdTdWJzY3JpcHRpb24gbm90IGZvdW5kJyB9KTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3Vic2NyaXB0aW9uQnlVc2VySWRIYW5kbGVyKFxuICByZXF1ZXN0OiBGYXN0aWZ5UmVxdWVzdDx7IFBhcmFtczogeyB1c2VySWQ6IHN0cmluZyB9IH0+LFxuICByZXBseTogRmFzdGlmeVJlcGx5XG4pIHtcbiAgY29uc3QgeyB1c2VySWQgfSA9IHJlcXVlc3QucGFyYW1zO1xuICBjb25zdCBzdWJzY3JpcHRpb24gPSBhd2FpdCBnZXRTdWJzY3JpcHRpb24odXNlcklkKTtcbiAgXG4gIGlmICghc3Vic2NyaXB0aW9uKSB7XG4gICAgLy8gUmV0dXJuIGEgZGVmYXVsdCBmcmVlIHBsYW4gc3RydWN0dXJlIGlmIG5vIHN1YnNjcmlwdGlvbiBleGlzdHNcbiAgICByZXR1cm4gcmVwbHkuc2VuZCh7XG4gICAgICBpZDogJ2RlZmF1bHQnLFxuICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgcGxhbl90eXBlOiAnZnJlZScsXG4gICAgICBzdGF0dXM6ICdhY3RpdmUnLFxuICAgICAgc3RhcnRfZGF0ZTogbmV3IERhdGUoKSxcbiAgICAgIGVuZF9kYXRlOiBudWxsLFxuICAgICAgYmlsbGluZ19jeWNsZTogJ21vbnRobHknLFxuICAgICAgYW1vdW50OiAwLFxuICAgICAgbmV4dF9iaWxsaW5nX2F0OiBudWxsLFxuICAgICAgcGF5bWVudF9tZXRob2Q6IG51bGwsXG4gICAgfSk7XG4gIH1cbiAgXG4gIHJldHVybiByZXBseS5zZW5kKHN1YnNjcmlwdGlvbik7XG59XG4iXX0=